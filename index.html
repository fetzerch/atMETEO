<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>atMETEO: atMETEO - An ATmega based weather station</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">atMETEO
   </div>
   <div id="projectbrief">An ATmega based weather station</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">atMETEO - An ATmega based weather station </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>As its name implies <em>atMETEO</em> is a project for collecting and measuring weather related data from different sensors. The data is being collected by an ATmega based target and sent to a computer for further processing. From there the data can for example be feed into <a href="http://graphite.wikidot.com">graphite</a> in order to create graphs or passed on to a home automation server.</p>
<h2>Hardware </h2>
<p>The software can be built for different ATmega based target boards, such as the <a href="http://arduino.cc/en/pmwiki.php?n=Main/arduinoBoardUno">Arduino Uno</a>. The sensor access algorithms are implemented hardware independently (as libsensors). This leads to a small hardware dependent part, mainly for the pin connections, that can be easily ported to different targets.</p>
<h2>Compatible sensors </h2>
<h3>Hideki Thermo/Hygrometer</h3>
<p>The Hideki Thermo/Hygrometer (TS53) provides temperature and humidity over an wireless RF 433 MHz interface. In order to collect this sensor data, an RF 433 MHz receiver has to be connected to the targets Input Capture Pin (ICP).</p>
<h3>DHT22 / AM2302 Temperature and humidity module</h3>
<p>The DHT22 / <a href="http://akizukidenshi.com/download/ds/aosong/AM2302.pdf">AM2302</a> is a digital temperature and humidity sensor. The sensor has to be connected to one of the digital I/O pins (default AD2).</p>
<h3>Bosch BMP180 Digital pressure sensor</h3>
<p>The <a href="http://ae-bst.resource.bosch.com/media/products/dokumente/bmp180/BST-BMP180-DS000-12~1.pdf">Bosch BMP180</a> is a digital pressure sensor providing ambient temperature and barometric pressure. The sensor has to be conencted to the I2C bus.</p>
<h3>Melexis MLX90614 Infrared thermometer</h3>
<p>The <a href="http://www.melexis.com/Asset/IR-sensor-thermometer-MLX90614-Datasheet-DownloadLink-5152.aspx">Melexis MLX90614</a> is an infrared thermometer providing ambient and object temperatures. The sensor has to be connected to the I2C bus.</p>
<h3>Figaro TGS 2600</h3>
<p>The <a href="http://www.figarosensor.com/products/2600pdf.pdf">Figaro TGS 2600</a> is a high sensitive high sensitivity air contaminant sensor. Due to its analog nature, the detected uncalibrated sensor resistance has to be processed according to the datasheet. For collecting data from this sensor, it has to be connected to the Analog to Digital Conversion Pin 0 (ADC0) using a load resistance of 10k Ohm.</p>
<h2>Output format </h2>
<p>The received sensor values are transmitted over the UART interface and / or over Ethernet using UDP messages as JSON object.</p>
<p>Exemplary data: </p><pre class="fragment">{"rf433_1": {"temperature":-5.0,"humidity":48,"battery":true}}
{"rf433_2": {"temperature"18.3,"humidity":45,"battery":false}}
{"dht22": {"temperature":10.0,"humidity":32.0}}
{"bmp180": {"temperature": 17.3,"pressure": 1008.2}}
{"mlx90614": {"ambient_temperature":22.3,"object_temperature":34.6}}
{"tgs2600": {"sensor_resistance":14000}}
</pre><h2>Building </h2>
<p>The project uses CMake as configuration tool. Hence the very first in the build chain is to execute CMake as shown below. Note that the default configuration builds the project for execution on the build machine, mainly for testing purposes. </p><pre class="fragment">$ mkdir &lt;build dir&gt;
$ cd &lt;build dir&gt;
$ cmake &lt;source dir&gt;
</pre><h3>Cross compilation &amp; flashing</h3>
<p>A different configuration is needed to setup cross compilation and flashing for ATmega based targets. For this purpose <a href="https://github.com/mkleemann/cmake-avr">cmake-avr</a> has to be available on the build machine.</p>
<p>In order to use <a href="https://github.com/mkleemann/cmake-avr">cmake-avr</a> the <code>CMAKE_TOOLCHAIN_FILE</code> variable has to be set as well as a few other configuration variables.</p>
<p>Exemplary usage for an Arduino Uno: </p><pre class="fragment">$ cd &lt;build dir&gt;
$ cmake -DCMAKE_TOOLCHAIN_FILE=&lt;cmake-avr dir&gt;/generic-gcc-avr.cmake \
        -DTARGET_CONFIGURATION=arduino -DAVR_MCU=atmega328p \
        -DAVR_PROGRAMMER=arduino -DAVR_UPLOADTOOL_PORT=/dev/ttyACM0 \
        &lt;source dir&gt;
$ make &amp;&amp; make upload_sensors
</pre><p>Please see the cmake-avr documentation for more configuration options.</p>
<h3>Unit tests</h3>
<p>The project ships with a number of unit tests to ensure that the platform independent code functions properly. The unit tests are meant to be executed on the build system with <code>make test</code>.</p>
<p>Testing is enabled by default and can be disabled with the CMake option <code>BUILD_TESTING</code>. The tests log to standard out and generate JUnit XML output for further processing.</p>
<p>Code coverage information generation can be configured with the CMake option <code>BUILD_CODECOVERAGE</code>. After the compilation with <code>make</code>, the generated code coverage data can be converted into XML using <code>make gcovr_to_cobertura</code>.</p>
<h3>API Documentation</h3>
<p>The Doxygen based API documentation can be build with <code>make dox</code>. If not needed, the documentation support can be disabled with the CMake option <code>BUILD_DOCUMENTATION</code>.</p>
<h2>Disclaimer </h2>
<p>A micro controller project using C++ and templates is worth a disclaimer. The idea for the project evolved while I was looking for a smaller spare time project involving micro controllers and that can serve as practical accompaniment while reading <a href="http://erdani.com/index.php/books/modern-c-design">Modern C++ Design</a> and <a href="http://www.josuttis.com/tmplbook/tmplbook.html">C++ Templates</a>.</p>
<p>Thus the project doesn't claim to have the best, fastest or smallest implementation. The goal was more to modularize parts to be reusable and easy to extend and maintain.</p>
<h2>License </h2>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the <a href="http://www.gnu.org/licenses/gpl-2.0.html">GNU General Public License</a> for more details. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated for atMETEO by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
