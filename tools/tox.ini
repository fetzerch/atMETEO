# atMETEO - An ATmega based weather station
# Copyright (C) 2014-2015 Christian Fetzer
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along
# with this program; if not, write to the Free Software Foundation, Inc.,
# 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.

# Tox configuration file

[tox]
envlist = {py2,py3}-{flake8,pylint,test,coverage}
skipsdist = True

[flake8]
exclude = .git,.tox,*lib/python*

[tox:jenkins]
toxworkdir = {toxinidir}/../../tox

[testenv]
basepython =
    py2: python2.7
    py3: python3.5
deps =
    pyserial
    pywws
    flake8: flake8
    pylint: pylint
    {pylint,test,coverage}: nose
    coverage: coverage
sources = weather_station.py
package = weather_station
commands =
    flake8: flake8
    pylint: pylint --rcfile=pylintrc.ini {[testenv]sources}
    test: nosetests --nocapture {[testenv]sources} []

    # Can't break line: https://bitbucket.org/hpk42/tox/issues/213/multi-line-factor-specification-in
    coverage: nosetests --with-coverage --cover-erase --cover-tests --cover-branches --nocapture --cover-package {[testenv]package} {[testenv]sources} []
